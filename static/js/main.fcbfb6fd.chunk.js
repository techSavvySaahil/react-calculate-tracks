(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{203:function(e,a,r){"use strict";r.r(a);var t=r(0),n=r.n(t),c=r(68),i=r.n(c),o=(r(76),r(2)),s=r(3),l=r(6),u=r(4),p=r(7),m=r(8),g=(r(78),r(28)),d=r.n(g),h=r(5);var v=function(e){function a(){return Object(o.a)(this,a),Object(l.a)(this,Object(u.a)(a).apply(this,arguments))}return Object(p.a)(a,e),Object(s.a)(a,[{key:"render",value:function(){var e=this.props;e.isDragging;return(0,e.connectDragSource)(n.a.createElement("img",{id:"loco",src:d.a}))}}]),a}(n.a.Component),b=Object(h.DragSource)("loco",{beginDrag:function(e,a,r){return{comp:"loco"}}},function(e,a){return{connectDragSource:e.dragSource(),isDragging:a.isDragging()}})(v),f=r(29),T=r.n(f);var O=function(e){function a(){return Object(o.a)(this,a),Object(l.a)(this,Object(u.a)(a).apply(this,arguments))}return Object(p.a)(a,e),Object(s.a)(a,[{key:"render",value:function(){var e=this.props;e.isDragging;return(0,e.connectDragSource)(n.a.createElement("img",{id:"carriage",src:T.a}))}}]),a}(n.a.Component),D=Object(h.DragSource)("carriage",{beginDrag:function(e,a,r){return{comp:"carriage"}}},function(e,a){return{connectDragSource:e.dragSource(),isDragging:a.isDragging()}})(O);var E=function(e){function a(){return Object(o.a)(this,a),Object(l.a)(this,Object(u.a)(a).apply(this,arguments))}return Object(p.a)(a,e),Object(s.a)(a,[{key:"render",value:function(){var e=this.props;e.isOver,e.canDrop;return(0,e.connectDropTarget)(n.a.createElement("div",{className:"drop-area"},this.props.text))}}]),a}(n.a.Component),j=Object(h.DropTarget)(["loco","carriage"],{canDrop:function(e,a){return a.getItem(),!0},drop:function(e,a,r){if(!a.didDrop()){var t=a.getItem();e.makeNewTrain(t.comp)}}},function(e,a){return{connectDropTarget:e.dropTarget(),isOver:a.isOver(),isOverCurrent:a.isOver({shallow:!0}),canDrop:a.canDrop(),itemType:a.getItemType()}})(E);var k=function(e){function a(e){var r;Object(o.a)(this,a),(r=Object(l.a)(this,Object(u.a)(a).call(this,e))).state={arrivalTime:"",departureTime:""};var t=Object(m.a)(Object(m.a)(r));return r.calculateComp=function(){t.props.loco?t.state.locos=Array.from(new Array(t.props.loco).keys()):t.state.locos=[],t.props.carriage?t.state.cars=Array.from(new Array(t.props.carriage).keys()):t.state.cars=[]},r.updateTimings=function(e){var a=e.target.className.includes("arrival"),t=e.target.value,n=r.props.index;r.props.updateTrainTime(a,t,n)},r}return Object(p.a)(a,e),Object(s.a)(a,[{key:"render",value:function(){this.calculateComp();var e=this.props;e.isOver,e.canDrop;return(0,e.connectDropTarget)(n.a.createElement("div",null,"Train Number ",this.props.index+1," ",n.a.createElement("br",null),n.a.createElement("div",{className:"built-train"},this.state.locos.map(function(e,a){return n.a.createElement("img",{key:a,src:d.a})}),this.state.cars.map(function(e,a){return n.a.createElement("img",{key:a,src:T.a})})),n.a.createElement("div",{className:"timings"},n.a.createElement("input",{className:"arrival input",type:"number",disabled:!this.props.loco||!this.props.carriage,defaultValue:this.state.arrivalTime,onChange:this.updateTimings,placeholder:"Arrival Time(eg. 10.15)"}),n.a.createElement("input",{className:"departure input",type:"number",disabled:!this.props.loco||!this.props.carriage,defaultValue:this.state.departureTime,onChange:this.updateTimings,placeholder:"Departure Time(eg. 14.20)"}))))}}]),a}(n.a.Component),w=Object(h.DropTarget)(["loco","carriage"],{canDrop:function(e,a){var r=a.getItem();return e.checkDrop(e,r)},drop:function(e,a,r){if(!a.didDrop()){var t=a.getItem();"loco"===t.comp?e.updateTrain("loco",r):"carriage"===t.comp&&e.updateTrain("carriage",r)}}},function(e,a){return{connectDropTarget:e.dropTarget(),isOver:a.isOver(),isOverCurrent:a.isOver({shallow:!0}),canDrop:a.canDrop(),itemType:a.getItemType()}})(k),y=r(70),C=r.n(y),x=function(e){function a(){var e;Object(o.a)(this,a),(e=Object(l.a)(this,Object(u.a)(a).call(this))).state={trainArr:[],maxTracks:0};var r=Object(m.a)(Object(m.a)(e));return e.newTrainCB=function(a){var r=e.state.trainArr;"loco"===a?r.push({loco:1,carriage:0}):r.push({loco:0,carriage:1}),e.setState({trainArr:r})},e.checkDrop=function(e,a){return"loco"===a.comp?!e.loco:"carriage"===a.comp?!(e.carriage>1):void 0},e.updateTrain=function(e,a){var t=a.props,n=(a.state,t.index),c=r.state.trainArr;c[n][e]++,r.setState({trainArr:c})},e.updateTrainTime=function(e,a,t){if(t+1){var n=e?"arrival":"departure",c=r.state.trainArr;c[t][n]=parseFloat(parseFloat(a).toFixed(2)),r.setState({trainArr:c})}},e.calculateTracks=function(){var a,t=0,n=0,c=[];r.state.trainArr.some(function(e,r){return e.arrival&&e.departure?e.arrival>=e.departure?(alert("The arrival time should be before the departure time. Please check Train number ".concat(r+1,".")),a=!0):(c.push({time:e.arrival,arrival:!0}),void c.push({time:e.departure,arrival:!1})):(alert("All the trains should have arrival as well as departure timings. Please check Train number ".concat(r+1)),a=!0)}),a||(c.sort(function(e,a){return e.time!==a.time?e.time-a.time:e.arrival?-1:1}),c.forEach(function(e){e.arrival?n++:n--,n>t&&(t=n)}),e.setState({maxTracks:t}))},e}return Object(p.a)(a,e),Object(s.a)(a,[{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"App"},n.a.createElement("div",{className:"app-info"},"Check the number of tracks required for a station"),n.a.createElement("div",{className:"new-comp"},"Drag these components to build a new train or upgrade an existing one:",n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement(b,null),n.a.createElement("br",null),"Locomotive",n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement(D,null),n.a.createElement("br",null),"Carriage"),n.a.createElement("div",{className:"train-area"},n.a.createElement(j,{makeNewTrain:this.newTrainCB,text:"Drag and Drop here for new trains"}),n.a.createElement("span",{className:"build-info"},"*Every train should have one locomotive and at least one and at most two carriages."),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("div",{className:"train-rows"},this.state.trainArr.map(function(a,r){return n.a.createElement(w,{key:r,index:r,loco:a.loco,carriage:a.carriage,checkDrop:e.checkDrop,updateTrain:e.updateTrain,updateTrainTime:e.updateTrainTime})})),n.a.createElement("button",{onClick:this.calculateTracks},"Calculate tracks required")),n.a.createElement("div",{className:"max-tracks"},n.a.createElement("span",null,"Maximum tracks required for this station are: "),n.a.createElement("span",{className:"track-count"},this.state.maxTracks)))}}]),a}(t.Component),N=Object(h.DragDropContext)(C.a)(x);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},28:function(e,a,r){e.exports=r.p+"static/media/loco.19ca0c2a.jpg"},29:function(e,a,r){e.exports=r.p+"static/media/carriage.100e52f4.jpg"},71:function(e,a,r){e.exports=r(203)},76:function(e,a,r){},78:function(e,a,r){}},[[71,2,1]]]);
//# sourceMappingURL=main.fcbfb6fd.chunk.js.map